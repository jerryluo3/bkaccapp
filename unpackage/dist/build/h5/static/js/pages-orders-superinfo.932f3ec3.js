(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-orders-superinfo"],{1148:function(e,t,i){"use strict";var a=i("a691"),r=i("1d80");e.exports="".repeat||function(e){var t=String(r(this)),i="",n=a(e);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(i+=t);return i}},"12c0":function(e,t,i){i("a4d3"),i("4de4"),i("4160"),i("e439"),i("dbb4"),i("b64b"),i("159b");var a=i("5757");function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}e.exports=n},"1b76":function(e,t,i){"use strict";i.r(t);var a=i("2c1d"),r=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=r.a},"2c1d":function(e,t,i){"use strict";(function(e){var a=i("ee27");i("acd8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(i("4976")),n=a(i("d7cb")),o={data:function(){return{baseUrl:r.default.baseUrl,userid:"",userInfo:[],order:[],orderno:"",maishou:[],coupon_disamount:0,orderQR:"",showOrderQR:!1,status:"待支付",ntime:"",info:{delta:2},titleHeight:0,statusBarHeight:0,naviBarHeight:0,superTitleHeight:0}},onLoad:function(t){var i=this,a=uni.getStorageSync("userid"),n=uni.getStorageSync("userInfo");e.log(n),i.userid=a,i.userInfo=n;var o=t.id;i.orderno=o,i.getOrderInfo();var s=Date.parse(s)/1e3;i.ntime=s;var u=t.act;"payfee"==u&&i.payfee(),i.titleHeight=r.default.titleHeight,i.statusBarHeight=r.default.statusBarHeight,i.naviBarHeight=r.default.naviBarHeight,i.superTitleHeight=r.default.titleHeight+50,i.titleHeight=0},onPullDownRefresh:function(){var t=this;uni.showNavigationBarLoading(),e.log("下拉刷新中...");t.orderno;t.getOrderInfo(),uni.hideNavigationBarLoading(),uni.stopPullDownRefresh()},onShareAppMessage:function(t){var i=this;t.from;uni.getStorageSync("userInfo");var a=i.order.goods_id,n=i.order.order_tuanid,o="/pages/tuan/tuanview?id="+a+"&tuanid="+n,s=r.default.baseUrl+i.order.goods_picture,u=o;return e.log(u),{title:i.order.goods_title,path:u,imageUrl:s}},methods:{daohang:function(){var t=this,i=parseFloat(t.order.shop_lat),a=parseFloat(t.order.shop_lng);uni.openLocation({latitude:i,longitude:a,success:function(){e.log("success")}})},toggleOrderQR:function(){var e=this,t=e.showOrderQR;e.showOrderQR=!t},orderQRCode:function(){var t=this,i=t.orderno;uni.request({url:r.default.baseUrl+"sharepic/getOrderQR",method:"GET",data:{orderno:i},success:function(i){e.log("orderQR",i),t.orderQR=i.data.orderQR,t.toggleOrderQR()},fail:function(){},complete:function(){}})},authpay:function(){var t=this;uni.login({provider:"weixin",success:function(i){e.log(i);var a=i.code;uni.getUserInfo({provider:"weixin",success:function(i){var n=i.rawData,o=i.signature,s=i.iv;i.encryptedData;uni.request({url:r.default.apiUrl+"login/updateUserInfo",method:"GET",data:{userid:t.userid,code:a,rawData:n,signature:o,iv:s},success:function(i){if(e.log(i),0==i.data.code){var a=i.data.userInfo;uni.setStorageSync("userInfo",a),t.userInfo=a,t.payfee()}else uni.showToast({title:i.msg,duration:1e3,icon:"none"})},fail:function(){},complete:function(){}})}})}})},payfee:function(){var t=this,i=t.userid,a=t.orderno;e.log(i),e.log("orderno",a),uni.request({url:r.default.apiUrl+"pay/payfee",method:"GET",data:{userid:i,order_no:a,otype:1},success:function(i){e.log(i);var a=i.data.timeStamp,r=i.data.nonceStr,n=i.data.package,o=i.data.paySign;uni.requestPayment({provider:"wxpay",timeStamp:a,nonceStr:r,package:n,signType:"MD5",paySign:o,success:function(e){uni.showModal({title:"提示",content:"支付成功",showCancel:!1,cancelText:"",confirmText:"确定",success:function(e){setTimeout((function(){t.getOrderInfo()}),1e3)},fail:function(){},complete:function(){}})},fail:function(t){e.log("fail:"+JSON.stringify(t))}})},fail:function(){},complete:function(){}})},getOrderInfo:function(){var t=this,i=t.orderno;e.log("orderno",i),uni.request({url:r.default.apiUrl+"orders/getSuperOrderInfo",method:"GET",data:{orderno:i},success:function(i){e.log("res",i),t.order=i.data.order,t.addtime=i.data.order.addtime,t.status=i.data.status,e.log(t.addtime)},fail:function(){},complete:function(){}})},cancelOrderCountDown:function(){var t=this,i=t.addtime,a=new Date,r=a.getTime();if(r/=1e3,e.log(r),r-i<60&&t.pay_status>=0){var o=60-(r-i),s=n.default.formatTime(o);t.counttime=s,setTimeout((function(){t.cancelOrderCountDown()}),1e3),t.isneworder=1}else clearTimeout((function(){t.cancelOrderCountDown()})),t.isneworder=0},contactRider:function(){var e=this,t=e.psuser;""!=t?uni.makePhoneCall({phoneNumber:t.mem_mobile}):uni.showToast({title:"获取骑手信息失败",duration:1e3})},contactMaishou:function(){var e=this,t=e.maishou;""!=t?uni.makePhoneCall({phoneNumber:t.mem_mobile}):uni.showToast({title:"获取买手信息失败",duration:1e3})},jumpUrl:function(e){var t=e.currentTarget.dataset.url;uni.navigateTo({url:t})}}};t.default=o}).call(this,i("5a52")["default"])},"408a":function(e,t,i){var a=i("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=a(e))throw TypeError("Incorrect invocation");return+e}},"991f":function(e,t,i){"use strict";var a,r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"order_header"},[i("v-uni-view",{staticClass:"order_status"},[e._v(e._s(e.status))]),null!=e.userInfo.users_openid&&""!=e.userInfo.users_openid||0!=e.order.order_status?null!=e.userInfo.users_openid&&""!=e.userInfo.users_openid&&0==e.order.order_status?i("v-uni-button",{staticClass:"order_pay",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.payfee.apply(void 0,arguments)}}},[e._v("马上支付")]):e._e():i("v-uni-button",{staticClass:"order_pay",attrs:{"open-type":"getUserInfo"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.authpay.apply(void 0,arguments)}}},[e._v("授权并支付")])],1),i("v-uni-view",{staticClass:"order_block"},[i("v-uni-view",{staticClass:"contact_btn weui-flex"},[1==e.order.order_status?i("v-uni-view",{staticClass:"weui-flex__item"},[i("v-uni-button",{staticClass:"order_qishou",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.orderQRCode.apply(void 0,arguments)}}},[e._v("核销码")])],1):e._e(),""!=e.maishou?i("v-uni-view",{staticClass:"weui-flex__item"},[i("v-uni-button",{staticClass:"order_maishou",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.contactMaishou.apply(void 0,arguments)}}},[e._v("联系客服")])],1):e._e()],1)],1),i("v-uni-view",{staticClass:"order_block"},[i("v-uni-view",{staticClass:"order_block_tilte"},[e._v("商品信息")]),i("v-uni-view",{staticClass:"order_list"},[i("v-uni-view",{staticClass:"order_item weui-flex"},[i("v-uni-view",{staticClass:"order_title weui-flex__item"},[i("v-uni-view",{staticClass:"title_name"},[e._v(e._s(e.order.order_title))]),""!=e.order.order_guige?i("v-uni-view",{staticClass:"guige"},[e._v("规格："+e._s(e.order.order_guige))]):e._e()],1),i("v-uni-view",{staticClass:"order_nums"},[e._v("x"+e._s(e.order.order_nums))]),i("v-uni-view",{staticClass:"order_amount"},[i("v-uni-view",[e._v("¥"+e._s(e.order.order_price))])],1)],1)],1),i("v-uni-view",{staticClass:"fee_list"},[i("v-uni-view",{staticClass:"fee_item weui-flex"},[i("v-uni-view",{staticClass:"weui-flex__item fee_name"}),i("v-uni-view",{staticClass:"weui-flex__item fee_num all_amount"},[e._v("合计：¥"+e._s(e.order.order_amount))])],1)],1)],1),i("v-uni-view",{staticClass:"order_block"},[i("v-uni-view",{staticClass:"order_block_tilte"},[e._v("商户信息")]),i("v-uni-view",{staticClass:"ps_list"},[i("v-uni-view",{staticClass:"ps_item weui-flex"},[i("v-uni-view",{staticClass:"item_name"},[e._v("商户名称")]),i("v-uni-view",{staticClass:"weui-flex__item item_val"},[e._v(e._s(e.order.shop_title))])],1),i("v-uni-view",{staticClass:"ps_item weui-flex",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.daohang.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"item_name"},[e._v("商户地址")]),i("v-uni-view",{staticClass:"weui-flex__item item_val"},[e._v(e._s(e.order.shop_address)),i("span",{staticClass:"link"},[e._v("[去这里]")])])],1),i("v-uni-view",{staticClass:"ps_item weui-flex"},[i("v-uni-view",{staticClass:"item_name"},[e._v("营业时间")]),i("v-uni-view",{staticClass:"weui-flex__item item_val"},[e._v(e._s(e.order.shop_worktime))])],1)],1)],1),i("v-uni-view",{staticClass:"order_block"},[i("v-uni-view",{staticClass:"order_block_tilte"},[e._v("订单信息")]),i("v-uni-view",{staticClass:"ps_list"},[i("v-uni-view",{staticClass:"ps_item weui-flex"},[i("v-uni-view",{staticClass:"item_name"},[e._v("订单号")]),i("v-uni-view",{staticClass:"weui-flex__item item_val"},[e._v(e._s(e.order.order_no))])],1),i("v-uni-view",{staticClass:"ps_item weui-flex"},[i("v-uni-view",{staticClass:"item_name"},[e._v("支付方式")]),i("v-uni-view",{staticClass:"weui-flex__item item_val"},[e._v("在线支付")])],1),i("v-uni-view",{staticClass:"ps_item weui-flex"},[i("v-uni-view",{staticClass:"item_name"},[e._v("下单时间")]),i("v-uni-view",{staticClass:"weui-flex__item item_val"},[e._v(e._s(e.order.addtime))])],1)],1)],1),e.showOrderQR?i("v-uni-view",{staticClass:"popbg",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.toggleOrderQR.apply(void 0,arguments)}}}):e._e(),e.showOrderQR?i("v-uni-view",{staticClass:"pop_orderqr"},[""!=e.orderQR?i("v-uni-image",{attrs:{src:e.baseUrl+e.orderQR,mode:""}}):e._e()],1):e._e()],1)},n=[];i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a}))},a765:function(e,t,i){"use strict";i.r(t);var a=i("991f"),r=i("1b76");for(var n in r)"default"!==n&&function(e){i.d(t,e,(function(){return r[e]}))}(n);i("b2c4");var o,s=i("f0c5"),u=Object(s["a"])(r["default"],a["b"],a["c"],!1,null,"071e24a6",null,!1,a["a"],o);t["default"]=u.exports},af83:function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,".order_header[data-v-071e24a6]{background:#fff;padding:%?30?%;text-align:center;margin-bottom:%?20?%}.order_status[data-v-071e24a6]{font-size:%?36?%;font-weight:700}.order_status_tip[data-v-071e24a6]{font-size:%?28?%;color:#666;padding:%?20?% 0}.order_pay[data-v-071e24a6]{background:#fdd108;color:#008085;margin:3%;height:%?100?%;line-height:%?100?%;border-radius:%?6?%;text-align:center;font-size:%?32?%;font-weight:700}.order_cancel[data-v-071e24a6]{background:#c40;color:#fff;margin:3%;height:%?100?%;line-height:%?100?%;border-radius:%?6?%;text-align:center;font-size:%?32?%;font-weight:700}.order_maishou[data-v-071e24a6]{background:#00b26a;color:#fff;height:%?70?%;line-height:%?70?%;border-radius:%?6?%;text-align:center;margin:3%;font-size:%?28?%}.order_qishou[data-v-071e24a6]{background:#1286e9;color:#fff;height:%?70?%;line-height:%?70?%;border-radius:%?6?%;text-align:center;margin:3%;font-size:%?28?%}.quhuo[data-v-071e24a6]{background:url(https://www.dingecai.com/data/weapp/images/quhuo.png) top no-repeat #fafafa;background-size:%?100?% %?100?%}.tuan_info[data-v-071e24a6]{background:#fff;text-align:center;padding:%?20?% 0;margin-bottom:%?20?%}.tuan_price[data-v-071e24a6]{font-size:%?36?%;color:#f40}.tuan_btns[data-v-071e24a6]{padding:%?20?% 0}.tuan_btn[data-v-071e24a6]{font-size:%?32?%;height:%?80?%;line-height:%?80?%;padding:0 %?40?%;display:inline-block;margin:0 %?5?%;background:#eee;color:#666}.tuan_status[data-v-071e24a6]{background:#00797f;color:#fff}.tuan_kaituan[data-v-071e24a6]{background:#f40;color:#fff}.tuan_cantuan[data-v-071e24a6]{background:#90257a;color:#fff}.order_block[data-v-071e24a6]{background:#fff;width:100%;margin-bottom:%?20?%}.order_block_tilte[data-v-071e24a6]{height:%?80?%;line-height:%?80?%;font-size:%?32?%;font-weight:700;text-indent:%?20?%;border-bottom:%?1?% solid #eee}.order_list[data-v-071e24a6]{display:block}.order_item[data-v-071e24a6]{border-bottom:%?1?% solid #eee;line-height:%?60?%;color:#333;padding:%?10?% %?20?%}.order_img[data-v-071e24a6]{width:%?60?%;height:%?60?%}.order_img uni-image[data-v-071e24a6]{width:%?60?%;height:%?60?%}.title_name[data-v-071e24a6]{font-size:%?28?%}.hezong[data-v-071e24a6]{color:red}.order_nums[data-v-071e24a6]{width:%?100?%;text-align:right;font-size:%?24?%}.order_amount[data-v-071e24a6]{width:%?150?%;text-align:right;font-size:%?28?%}.fee_list[data-v-071e24a6]{width:100%}.fee_item[data-v-071e24a6]{border-bottom:%?1?% solid #eee;line-height:%?70?%;padding:%?10?% 0}.fee_name[data-v-071e24a6]{padding-left:%?20?%;font-size:%?28?%}.fee_num[data-v-071e24a6]{text-align:right;padding-right:%?20?%}.all_amount[data-v-071e24a6]{font-size:%?28?%;font-weight:700}.all_amount uni-text[data-v-071e24a6]{color:red}.disamount[data-v-071e24a6]{color:#e50011}.ps_list[data-v-071e24a6]{width:100%}.ps_item[data-v-071e24a6]{border-bottom:%?1?% solid #eee;font-size:%?24?%;color:#666;padding:%?20?%}.item_name[data-v-071e24a6]{font-size:%?28?%;color:#333;width:%?200?%}.item_val[data-v-071e24a6]{text-align:right;font-size:%?28?%}.item_detail[data-v-071e24a6]{text-align:right;font-size:%?28?%}.popbg[data-v-071e24a6]{background:rgba(0,0,0,.8);position:fixed;top:0;right:0;bottom:0;left:0;z-index:100}.pop_orderqr[data-v-071e24a6]{width:%?500?%;background:#fff;border-radius:%?10?%;position:fixed;top:%?200?%;left:%?105?%;right:%?105?%;padding:%?20?%;z-index:1000}.pop_orderqr uni-image[data-v-071e24a6]{width:%?500?%;height:%?500?%;display:block}.share_btn[data-v-071e24a6]{background:#ffb400;color:#fff;height:%?100?%;line-height:%?100?%;margin:%?20?%;text-align:center;position:relative;font-size:%?32?%;font-weight:700;display:block;border-radius:%?100?%}.link[data-v-071e24a6]{color:#007aff}",""]),e.exports=t},b2c4:function(e,t,i){"use strict";var a=i("ede4"),r=i.n(a);r.a},b680:function(e,t,i){"use strict";var a=i("23e7"),r=i("a691"),n=i("408a"),o=i("1148"),s=i("d039"),u=1..toFixed,d=Math.floor,l=function(e,t,i){return 0===t?i:t%2===1?l(e,t-1,i*e):l(e*e,t/2,i)},c=function(e){var t=0,i=e;while(i>=4096)t+=12,i/=4096;while(i>=2)t+=1,i/=2;return t},f=u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){u.call({})}));a({target:"Number",proto:!0,forced:f},{toFixed:function(e){var t,i,a,s,u=n(this),f=r(e),v=[0,0,0,0,0,0],g="",h="0",_=function(e,t){var i=-1,a=t;while(++i<6)a+=e*v[i],v[i]=a%1e7,a=d(a/1e7)},p=function(e){var t=6,i=0;while(--t>=0)i+=v[t],v[t]=d(i/e),i=i%e*1e7},m=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==v[e]){var i=String(v[e]);t=""===t?i:t+o.call("0",7-i.length)+i}return t};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(g="-",u=-u),u>1e-21)if(t=c(u*l(2,69,1))-69,i=t<0?u*l(2,-t,1):u/l(2,t,1),i*=4503599627370496,t=52-t,t>0){_(0,i),a=f;while(a>=7)_(1e7,0),a-=7;_(l(10,a,1),0),a=t-1;while(a>=23)p(1<<23),a-=23;p(1<<a),_(1,1),p(2),h=m()}else _(0,i),_(1<<-t,0),h=m()+o.call("0",f);return f>0?(s=h.length,h=g+(s<=f?"0."+o.call("0",f-s)+h:h.slice(0,s-f)+"."+h.slice(s-f))):h=g+h,h}})},d7cb:function(e,t,i){i("a15b"),i("d81d"),i("b680"),i("d3b7"),i("acd8"),i("e25e"),i("ac1f"),i("25f0"),i("5319"),i("1276");var a=i("12c0");function r(e){if("number"!==typeof e||e<0)return e;var t=parseInt(e/3600);e%=3600;var i=parseInt(e/60);e=parseInt(e%60);var a=e;return[t,i,a].map((function(e){return e=e.toString(),e[1]?e:"0"+e})).join(":")}function n(e){e=new Date(e);var t=1900+e.getYear(),i="0"+(e.getMonth()+1),a="0"+e.getDate(),r="0"+e.getHours(),n="0"+e.getMinutes();e.getSeconds();return t+"-"+i.substring(i.length-2,i.length)+"-"+a.substring(a.length-2,a.length)+" "+r.substring(r.length-2,r.length)+":"+n.substring(n.length-2,n.length)}function o(e,t){for(var i=new Object,r=0,n=e.length;r<n;r++){var o=e[r][t];i[o]=a({},e[r])}return i}function s(e){return"undefined"==typeof e||null==e?"":e.replace(/^(\d{4})\d{4}(\d+)/,"$1****$2")}function u(e){var t=new Array;for(var i in e)t.push(e[i]);return t}function d(e){var t=/^[1][3,4,5,7,8,9][0-9]{9}$/;return!!t.test(e)}function l(e,t){return"string"===typeof e&&"string"===typeof t&&(e=parseFloat(e),t=parseFloat(t)),e=e.toFixed(2),t=t.toFixed(2),{longitude:e.toString().split("."),latitude:t.toString().split(".")}}var c={UNITS:{"年":315576e5,"月":26298e5,"天":864e5,"小时":36e5,"分钟":6e4,"秒":1e3},humanize:function(e){var t="";for(var i in this.UNITS)if(e>=this.UNITS[i]){t=Math.floor(e/this.UNITS[i])+i+"前";break}return t||"刚刚"},format:function(e){var t=this.parse(e),i=Date.now()-t.getTime();if(i<this.UNITS["天"])return this.humanize(i);var a=function(e){return e<10?"0"+e:e};return t.getFullYear()+"/"+a(t.getMonth()+1)+"/"+a(t.getDay())+"-"+a(t.getHours())+":"+a(t.getMinutes())},parse:function(e){var t=e.split(/[^0-9]/);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])}};e.exports={formatTime:r,formatUnixtimestamp:n,formatLocation:l,dateUtils:c,ObjectToArray:u,ArrayExtractToObjectWithKey:o,isPoneAvailable:d,hidePhoneNumber:s}},ede4:function(e,t,i){var a=i("af83");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=i("4f06").default;r("fd97f924",a,!0,{sourceMap:!1,shadowMode:!1})}}]);